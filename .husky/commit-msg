#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Verifica se a mensagem de commit segue o padr√£o
commit_regex='^(feat|fix|docs|style|refactor|test|chore|perf|ci|build|revert)(\(.+\))?: .{1,50}'

if ! grep -qE "$commit_regex" "$1"; then
    echo "‚ùå Formato de commit inv√°lido!"
    echo ""
    echo "üìù Formato esperado:"
    echo "  <tipo>(<escopo>): <descri√ß√£o>"
    echo ""
    echo "üîß Tipos v√°lidos:"
    echo "  feat:     Nova funcionalidade"
    echo "  fix:      Corre√ß√£o de bug"
    echo "  docs:     Documenta√ß√£o"
    echo "  style:    Formata√ß√£o, sem mudan√ßa de c√≥digo"
    echo "  refactor: Refatora√ß√£o de c√≥digo"
    echo "  test:     Adi√ß√£o ou corre√ß√£o de testes"
    echo "  chore:    Mudan√ßas em ferramentas, configura√ß√µes"
    echo "  perf:     Melhoria de performance"
    echo "  ci:       Mudan√ßas em CI/CD"
    echo "  build:    Mudan√ßas no sistema de build"
    echo "  revert:   Revers√£o de commit"
    echo ""
    echo "üìã Exemplos:"
    echo "  feat(auth): adicionar login com Google"
    echo "  fix(ui): corrigir layout responsivo"
    echo "  docs: atualizar README"
    echo "  chore: atualizar depend√™ncias"
    echo ""
    exit 1
fi

echo "‚úÖ Formato de commit v√°lido!"
